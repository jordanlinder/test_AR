<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <!-- BASE -->
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
 
  <!-- VIDEOHANDELERS -->
  <script>
    AFRAME.registerComponent('videohandler', {
      init: function () {
        var marker = this.el;
        this.vid = document.querySelector("#vid");

        marker.addEventListener('markerFound', function () {
          this.toggle = true;
          this.vid.play();
        }.bind(this));

        marker.addEventListener('markerLost', function () {
          this.toggle = false;
          this.vid.pause();
        }.bind(this));
      },
    });
  </script>
  <script>
    AFRAME.registerComponent('videohandlerone', {
      init: function () {
        var marker = this.el;
        this.vid = document.querySelector("#swiss");

        marker.addEventListener('markerFound', function () {
          this.toggle = true;
          this.vid.play();
        }.bind(this));

        marker.addEventListener('markerLost', function () {
          this.toggle = false;
          this.vid.pause();
        }.bind(this));
      },
    });
  </script>
</head>
  
<!-- https://github.com/nicolocarpignoli/artoolkit-barcode-markers-collection -->
  
<body style="margin: 0; overflow: hidden;">
<a-scene  embedded
          arjs='sourceType: webcam; sourceWidth:1920; sourceHeight:1080; displayWidth: 1920; displayHeight: 1080; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'
          id="scene"
          vr-mode-ui="enabled: false"
          loading-screen="enabled: false;">

  <a-assets>
    <video
      id="vid"
      src="./assets/video/Coltellino.mp4"
      preload="auto"
      response-type="arraybuffer"
      loop
      crossorigin
      webkit-playsinline
      autoplay
      muted
      playsinline
    ></video>
    <video
      id="swiss"
      src="./assets/video/terreno.mov"
      preload="auto"
      response-type="arraybuffer"
      loop
      crossorigin
      webkit-playsinline
      autoplay
      muted
      playsinline
    ></video>
  </a-assets>

  <a-marker
    type='barcode' value='1' videohandlerone
            smooth="true"
      smoothCount="5"
      smoothTolerance=".01"
      smoothThreshold="5"
  >
    <a-video
      src="#swiss"
      scale="3 1.6 1"
      position="0 0.1 0"
      rotation="-90 0 0"
    ></a-video>
  </a-marker>

  <a-marker
    type='barcode' value='15' videohandler
            smooth="true"
      smoothCount="5"
      smoothTolerance=".01"
      smoothThreshold="5"
  >
    <a-video
      src="#vid"
      scale="5 5 1"
      position="0 0.1 0"
      rotation="-90 0 0"
    ></a-video>
  </a-marker>

  <a-entity camera></a-entity>
</a-scene>


</body>
</html>
